# Sophia AI - Full-Stack Architecture Document

## Table of Contents

- [Sophia AI - Full-Stack Architecture Document](#table-of-contents)
  - [Table of Contents](./table-of-contents.md)
  - [1. Introduction](./1-introduction.md)
    - [1.1 Project Overview](./1-introduction.md#11-project-overview)
    - [1.2 Architecture Goals](./1-introduction.md#12-architecture-goals)
    - [1.3 Starter Template Reference](./1-introduction.md#13-starter-template-reference)
    - [1.4 Document Changelog](./1-introduction.md#14-document-changelog)
  - [2. High Level Architecture](./2-high-level-architecture.md)
    - [2.1 Technical Summary](./2-high-level-architecture.md#21-technical-summary)
    - [2.2 Platform Choice](./2-high-level-architecture.md#22-platform-choice)
    - [2.3 Repository Structure](./2-high-level-architecture.md#23-repository-structure)
    - [2.4 System Architecture Diagram](./2-high-level-architecture.md#24-system-architecture-diagram)
    - [2.5 Architectural Patterns](./2-high-level-architecture.md#25-architectural-patterns)
  - [3. Tech Stack](./3-tech-stack.md)
  - [4. Data Models](./4-data-models.md)
    - [4.1 Core Domain Models](./4-data-models.md#41-core-domain-models)
    - [4.2 Conversation Models](./4-data-models.md#42-conversation-models)
    - [4.3 Document Models](./4-data-models.md#43-document-models)
    - [4.4 Listing Models](./4-data-models.md#44-listing-models)
    - [4.5 Calculator Models](./4-data-models.md#45-calculator-models)
    - [4.6 Email Models](./4-data-models.md#46-email-models)
  - [5. API Specification](./5-api-specification.md)
    - [5.1 API Architecture](./5-api-specification.md#51-api-architecture)
    - [5.2 tRPC Router Structure](./5-api-specification.md#52-trpc-router-structure)
    - [5.3 Agent Router](./5-api-specification.md#53-agent-router)
    - [5.4 Conversation Router](./5-api-specification.md#54-conversation-router)
    - [5.5 Document Router](./5-api-specification.md#55-document-router)
    - [5.6 Listing Router](./5-api-specification.md#56-listing-router)
    - [5.7 Calculator Router](./5-api-specification.md#57-calculator-router)
    - [5.8 Email Router](./5-api-specification.md#58-email-router)
  - [6. Components](./6-components.md)
    - [6.1 Service Layer Architecture](./6-components.md#61-service-layer-architecture)
    - [6.2 Repository Pattern](./6-components.md#62-repository-pattern)
    - [6.3 Dependency Injection](./6-components.md#63-dependency-injection)
  - [7. External APIs](./7-external-apis.md)
    - [7.1 WhatsApp Business API (Meta Cloud API)](./7-external-apis.md#71-whatsapp-business-api-meta-cloud-api)
    - [7.2 Telegram Bot API](./7-external-apis.md#72-telegram-bot-api)
    - [7.3 OpenAI API](./7-external-apis.md#73-openai-api)
    - [7.4 Gmail API](./7-external-apis.md#74-gmail-api)
    - [7.5 zyprus.com API](./7-external-apis.md#75-zypruscom-api)
  - [8. Core Workflows](./8-core-workflows.md)
    - [8.1 Message Processing Workflow](./8-core-workflows.md#81-message-processing-workflow)
    - [8.2 Document Generation Workflow](./8-core-workflows.md#82-document-generation-workflow)
    - [8.3 Listing Upload Workflow](./8-core-workflows.md#83-listing-upload-workflow)
    - [8.4 Calculator Workflow](./8-core-workflows.md#84-calculator-workflow)
    - [8.5 Error Handling Workflow](./8-core-workflows.md#85-error-handling-workflow)
  - [9. Database Schema](./9-database-schema.md)
    - [9.1 Schema Overview](./9-database-schema.md#91-schema-overview)
    - [9.2 Complete SQL Schema](./9-database-schema.md#92-complete-sql-schema)
  - [10. Frontend Architecture](./10-frontend-architecture.md)
    - [10.1 Tech Stack](./10-frontend-architecture.md#101-tech-stack)
    - [10.2 App Router Structure](./10-frontend-architecture.md#102-app-router-structure)
    - [10.3 Component Structure](./10-frontend-architecture.md#103-component-structure)
    - [10.4 State Management (Zustand)](./10-frontend-architecture.md#104-state-management-zustand)
    - [10.5 tRPC Client Setup](./10-frontend-architecture.md#105-trpc-client-setup)
  - [11. Backend Architecture](./11-backend-architecture.md)
    - [11.1 Serverless Functions](./11-backend-architecture.md#111-serverless-functions)
    - [11.2 Service Layer](./11-backend-architecture.md#112-service-layer)
    - [11.3 Authentication Flow](./11-backend-architecture.md#113-authentication-flow)
    - [11.4 tRPC Context](./11-backend-architecture.md#114-trpc-context)
  - [12. Unified Project Structure](./12-unified-project-structure.md)
    - [Import Path Mapping](./12-unified-project-structure.md#import-path-mapping)
    - [Environment Variables](./12-unified-project-structure.md#environment-variables)
  - [13. Development Workflow](./13-development-workflow.md)
    - [13.1 Prerequisites](./13-development-workflow.md#131-prerequisites)
    - [13.2 Initial Setup](./13-development-workflow.md#132-initial-setup)
    - [13.3 Development Commands](./13-development-workflow.md#133-development-commands)
    - [13.4 Webhook Development](./13-development-workflow.md#134-webhook-development)
  - [14. Deployment Architecture](./14-deployment-architecture.md)
    - [14.1 Environments](./14-deployment-architecture.md#141-environments)
    - [14.2 CI/CD Pipeline (GitHub Actions)](./14-deployment-architecture.md#142-cicd-pipeline-github-actions)
    - [14.3 Scaling Strategy](./14-deployment-architecture.md#143-scaling-strategy)
    - [14.4 Cost Estimates](./14-deployment-architecture.md#144-cost-estimates)
  - [15. Security and Performance](./15-security-and-performance.md)
    - [15.1 Authentication & Authorization](./15-security-and-performance.md#151-authentication-authorization)
    - [15.2 Data Security](./15-security-and-performance.md#152-data-security)
    - [15.3 Rate Limiting](./15-security-and-performance.md#153-rate-limiting)
    - [15.4 Performance Targets](./15-security-and-performance.md#154-performance-targets)
    - [15.5 Security Headers](./15-security-and-performance.md#155-security-headers)
  - [16. Testing Strategy](./16-testing-strategy.md)
    - [16.1 Testing Pyramid](./16-testing-strategy.md#161-testing-pyramid)
    - [16.2 Test Coverage Requirements](./16-testing-strategy.md#162-test-coverage-requirements)
    - [16.3 Test Examples](./16-testing-strategy.md#163-test-examples)
  - [17. Coding Standards](./17-coding-standards.md)
    - [17.1 TypeScript Configuration](./17-coding-standards.md#171-typescript-configuration)
    - [17.2 Naming Conventions](./17-coding-standards.md#172-naming-conventions)
    - [17.3 Git Commit Convention](./17-coding-standards.md#173-git-commit-convention)
    - [17.4 Pre-commit Hooks](./17-coding-standards.md#174-pre-commit-hooks)
  - [18. Error Handling Strategy](./18-error-handling-strategy.md)
    - [18.1 Error Class Hierarchy](./18-error-handling-strategy.md#181-error-class-hierarchy)
    - [18.2 Retry Strategy](./18-error-handling-strategy.md#182-retry-strategy)
    - [18.3 Error Recovery Checklist](./18-error-handling-strategy.md#183-error-recovery-checklist)
  - [19. Monitoring and Observability](./19-monitoring-and-observability.md)
    - [19.1 Monitoring Stack](./19-monitoring-and-observability.md#191-monitoring-stack)
    - [19.2 Key Metrics](./19-monitoring-and-observability.md#192-key-metrics)
    - [19.3 Alert Rules](./19-monitoring-and-observability.md#193-alert-rules)
    - [19.4 Health Checks](./19-monitoring-and-observability.md#194-health-checks)
    - [19.5 Incident Response](./19-monitoring-and-observability.md#195-incident-response)
  - [20. Architecture Review & Sign-off](./20-architecture-review-sign-off.md)
    - [20.1 Document Completeness: 100% ✅](./20-architecture-review-sign-off.md#201-document-completeness-100)
    - [20.2 PRD Requirements Coverage: 100% ✅](./20-architecture-review-sign-off.md#202-prd-requirements-coverage-100)
    - [20.3 Technical Validation ✅](./20-architecture-review-sign-off.md#203-technical-validation)
    - [20.4 Implementation Roadmap](./20-architecture-review-sign-off.md#204-implementation-roadmap)
    - [20.5 Known Gaps & Risks](./20-architecture-review-sign-off.md#205-known-gaps-risks)
    - [20.6 Architect Approval](./20-architecture-review-sign-off.md#206-architect-approval)
  - [Appendix: Quick Reference](./appendix-quick-reference.md)
    - [Dashboard URLs](./appendix-quick-reference.md#dashboard-urls)
    - [Key Commands](./appendix-quick-reference.md#key-commands)
    - [Support Contacts](./appendix-quick-reference.md#support-contacts)
